const { calculateTotal } = require('./data');

// ==============================================
// ==============================================
// ==============================================
// ==============================================

const products = [
  {
    id: 1,
    price: 100,
    units_in_stock: 100,
  },
  {
    id: 2,
    price: 200,
    units_in_stock: 100,
  },
];

// ==============================================
// ==============================================
// ==============================================
// ==============================================

const orders = [
  {
    id: 1,
    user_id: 1,
    total: null,
  },
  {
    id: 2,
    user_id: 1,
    total: null,
  },
];

// ==============================================
// ==============================================
// ==============================================
// ==============================================

const order_2_product = [
  {
    id: 1,
    order_id: 1,
    product_id: 1,
    quantity: 1,
  },
  {
    id: 2,
    order_id: 1,
    product_id: 2,
    quantity: 1,
  },
  {
    id: 3,
    order_id: 2,
    product_id: 1,
    quantity: 2,
  },
  {
    id: 4,
    order_id: 2,
    product_id: 2,
    quantity: 2,
  },
];

// ==============================================
// ==============================================
// ==============================================
// ==============================================

const id2idx = id => id - 1;
const idx2id = idx => idx + 1;

// ==============================================
// ==============================================
// ==============================================
// ==============================================

describe('generate fake data', () => {

  // ==============================================

  it('should pass', () => {
    expect(true).toBe(true);
  });

  // ==============================================

  test('order totals', () => {
    orders.forEach((order, idx) => calculateTotal({ order, products, order_2_product, order_id: idx2id(idx) }));
    expect(orders[0].total).toBe(300);
    expect(orders[1].total).toBe(600);
  });

  // ==============================================

});

// ==============================================
// ==============================================
// ==============================================
// ==============================================